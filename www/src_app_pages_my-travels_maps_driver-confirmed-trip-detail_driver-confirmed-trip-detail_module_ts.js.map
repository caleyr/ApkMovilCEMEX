{"version":3,"file":"src_app_pages_my-travels_maps_driver-confirmed-trip-detail_driver-confirmed-trip-detail_module_ts.js","mappings":"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","sources":["./src/app/pages/my-travels/maps/driver-confirmed-trip-detail/components/modal-detail-map-drive/modal-detail-map-drive.component.ts","./src/app/pages/my-travels/maps/driver-confirmed-trip-detail/driver-confirmed-trip-detail-routing.module.ts","./src/app/pages/my-travels/maps/driver-confirmed-trip-detail/driver-confirmed-trip-detail.module.ts","./src/app/pages/my-travels/maps/driver-confirmed-trip-detail/driver-confirmed-trip-detail.page.ts","./src/app/services/google.service.ts"],"sourcesContent":["import { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\nimport { Travel } from '../../../../../../interfaces/travels/travel';\nimport { GoogleService } from '../../../../../../services/google.service';\nimport { DatePipe } from '@angular/common';\nimport { TravelService } from '../../../../../../services/travels/travel.service';\n\n@Component({\n  selector: 'app-modal-detail-map-drive',\n  templateUrl: './modal-detail-map-drive.component.html',\n  styleUrls: ['./modal-detail-map-drive.component.scss'],\n})\nexport class ModalDetailMapDriveComponent implements OnInit {\n\n  travelDetail: Travel;\n  estado = 1;\n\n  constructor(\n    private googleService : GoogleService,\n    private datepipe: DatePipe,\n    private travelService : TravelService\n  ) {\n  }\n\n  ngOnInit() {}\n\n  onClickStartTravel(){\n    const horaStar = new Date();\n    const data = new FormData();\n    data.append('Id', this.travelDetail.id);\n    data.append('StatusTravel', '5');\n    data.append('TripStarTime', this.datepipe.transform(horaStar, 'h:mm'));\n    this.travelService.startTravel(this.travelDetail.id, data).subscribe(()=>{\n      this.googleService.refresh$.next();\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DriverConfirmedTripDetailPage } from './driver-confirmed-trip-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DriverConfirmedTripDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DriverConfirmedTripDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DriverConfirmedTripDetailPageRoutingModule } from './driver-confirmed-trip-detail-routing.module';\n\nimport { DriverConfirmedTripDetailPage } from './driver-confirmed-trip-detail.page';\nimport { CmxWebComponentsModule } from '@cmx-web-components/angular';\nimport { ModalDetailMapDriveComponent } from './components/modal-detail-map-drive/modal-detail-map-drive.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DriverConfirmedTripDetailPageRoutingModule,\n    CmxWebComponentsModule.forRoot(),\n  ],\n  declarations: [\n    DriverConfirmedTripDetailPage,\n    ModalDetailMapDriveComponent\n  ]\n})\nexport class DriverConfirmedTripDetailPageModule {}\n","import { Location } from '@angular/common';\nimport { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { DetailsTripPreviousPage } from '../../details-trip-previous/details-trip-previous.page';\nimport { ModalDetailMapDriveComponent } from './components/modal-detail-map-drive/modal-detail-map-drive.component';\nimport { TravelService } from '../../../../services/travels/travel.service';\nimport { Travel } from 'src/app/interfaces/travels/travel';\nimport { GoogleService } from '../../../../services/google.service';\nimport { Subscription } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\ndeclare var google;\n\n@Component({\n  selector: 'app-driver-confirmed-trip-detail',\n  templateUrl: './driver-confirmed-trip-detail.page.html',\n  styleUrls: ['./driver-confirmed-trip-detail.page.scss'],\n})\nexport class DriverConfirmedTripDetailPage implements OnInit, AfterViewInit {\n\n  id = null;\n\n  @ViewChild('mapVer') divMap: ElementRef;\n  map : any;\n  directionsService = new google.maps.DirectionsService();\n  directionsDisplay;\n\n  origin = { lat: 4.658383846282959, lng: -74.09394073486328 };\n  // Parque la 93\n  destination = { lat: 4.676802158355713, lng: -74.04825592041016 };\n\n  estado = 1;\n\n  travel = new Travel();\n\n  mapOptions = {\n        center: {\n            lat: 25.686614,\n            lng: -100.316113\n            //to get the latitude and longitude use: http://www.latlong.net/\n        },\n\n        zoom: 12,\n        styles: [\n            {\n                \"featureType\": \"administrative.country\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                    {\n                        \"visibility\": \"on\"\n                    }\n                ]\n            },\n            {\n                \"featureType\": \"administrative.province\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                    {\n                        \"visibility\": \"on\"\n                    }\n                ]\n            },\n            {\n                \"featureType\": \"administrative.province\",\n                \"elementType\": \"labels.text\",\n                \"stylers\": [\n                    {\n                        \"visibility\": \"on\"\n                    }\n                ]\n            }\n        ],\n        scaleControl: false,\n        streetViewControl: false,\n        scrollwheel: false,\n        draggable: true,\n        disableDefaultUI: true,\n        clickableIcons: false,\n    }\n\n  suscripcion : Subscription;\n\n  constructor(\n    private modalController: ModalController,\n    private travelService : TravelService,\n    private location : Location,\n    private googleService : GoogleService\n    ) { }\n\n  async ngOnInit() {\n    this.suscripcion = this.googleService.refresh$.subscribe(() =>{\n      this.getData();\n    });\n    this.getData();    \n  }\n\n  ngAfterViewInit(){\n    this.map = new google.maps.Map(this.divMap.nativeElement, this.mapOptions);\n    this.calculateRoute();\n  }\n\n  getData() {\n    if (this.travelService.id !== null) {\n      this.id = this.travelService.id;\n      this.travelService.getTravelDetail(this.id).subscribe(data => {\n        this.travel = data.data;\n        this.modalController.dismiss(); \n        this.modalData(this.travel);     \n      });\n    }\n  }\n\n  onBack(){\n    this.location.back();\n    this.modalController.dismiss();\n  }\n\n  async calculateRoute() {\n    var route;\n    var duration = 0;\n    var distance = 0;\n      this.directionsService.route({\n        origin: this.origin,\n        destination: this.destination,\n        travelMode: google.maps.TravelMode.DRIVING,\n      }, async ( response, status)  => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          this.directionsDisplay = new google.maps.DirectionsRenderer({\n            map: this.map,\n            directions: response\n          });\n          route = await response.routes[0];\n          route.legs.forEach(function (leg) {\n            duration += leg.duration.value/60;\n            distance += leg.distance.value/1000;\n          });\n        } else {\n          alert('Could not display directions due to: ' + status);\n        }\n    });\n  }\n\n  async modalData(travelD : Travel){\n    const modal = await this.modalController.create({\n      component: ModalDetailMapDriveComponent,\n      cssClass: 'message-modal',\n      initialBreakpoint : 0.38,\n      breakpoints : [0.1, 0.38, 1],\n      backdropDismiss : false,\n      backdropBreakpoint : 0.5,\n      componentProps:{\n        travelDetail : travelD        \n      }\n    })\n    await modal.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { tap } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleService {\n\n  private _refresh$ = new Subject<void>();\n\n  constructor() { }\n\n  get refresh$(){\n    return this._refresh$;\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}