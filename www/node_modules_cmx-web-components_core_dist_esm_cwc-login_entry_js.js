"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_cmx-web-components_core_dist_esm_cwc-login_entry_js"],{

/***/ 36931:
/*!*************************************************************************************!*\
  !*** ./node_modules/@cmx-web-components/core/dist/esm/_commonjsHelpers-97e6d7b1.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ commonjsGlobal),
/* harmony export */   "c": () => (/* binding */ createCommonjsModule),
/* harmony export */   "u": () => (/* binding */ unwrapExports)
/* harmony export */ });
var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function unwrapExports (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}




/***/ }),

/***/ 27345:
/*!********************************************************************************************!*\
  !*** ./node_modules/@cmx-web-components/core/dist/esm/commonComponentFeatures-b771e888.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "d": () => (/* binding */ destroyBasics),
/* harmony export */   "i": () => (/* binding */ initBasics)
/* harmony export */ });
function InitializeDirectionDetection(hostElement) {
    // the function that sets the dir in the shadow dom
    function executeDir(dir) {
        const shadowKids = hostElement.shadowRoot.childNodes;
        shadowKids.forEach(element => {
            element.setAttribute('dir', dir);
        });
    }
    function intervalHandler() {
        const actualDir = hostElement.dataset.dir;
        const dir = window.getComputedStyle(hostElement).getPropertyValue('direction');
        if (dir !== actualDir) {
            hostElement.dataset.dir = dir;
            hostElement.shadowRoot && executeDir(dir);
            if (dir === 'rtl') {
                return hostElement.setAttribute('rtl', 'true');
            }
            return hostElement.removeAttribute('rtl');
        }
    }
    hostElement['rtlInterval'] = setInterval(intervalHandler, 750);
}
function DestroyDirectionDetection(hostElement) {
    if (hostElement && hostElement['rtlInterval']) {
        clearInterval(hostElement['rtlInterval']);
    }
}

function setDesignVersion() {
    const frameworkVersion = getComputedStyle(document.documentElement).getPropertyValue('--cwc-version');
    return frameworkVersion ? frameworkVersion : 'v1';
}

function initBasics(componentClass) {
    !componentClass.designVersion && (componentClass.designVersion = setDesignVersion());
    if (!componentClass.rtl) {
        componentClass.host && InitializeDirectionDetection(componentClass.host);
    }
}
function destroyBasics(componentClass) {
    DestroyDirectionDetection(componentClass.host);
}




/***/ }),

/***/ 79891:
/*!***************************************************************************!*\
  !*** ./node_modules/@cmx-web-components/core/dist/esm/cwc-login.entry.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cwc_login": () => (/* binding */ Login)
/* harmony export */ });
/* harmony import */ var D_Documentos_Documentos_DocumentosPersonales_Cemex_appcemex_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core-cf426fab.js */ 98545);
/* harmony import */ var _commonComponentFeatures_b771e888_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commonComponentFeatures-b771e888.js */ 27345);
/* harmony import */ var _commonjsHelpers_97e6d7b1_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_commonjsHelpers-97e6d7b1.js */ 36931);




var Key_enum = (0,_commonjsHelpers_97e6d7b1_js__WEBPACK_IMPORTED_MODULE_3__.c)(function (module, exports) {
  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  var Key;

  (function (Key) {
    Key[Key["Backspace"] = 8] = "Backspace";
    Key[Key["Tab"] = 9] = "Tab";
    Key[Key["Enter"] = 13] = "Enter";
    Key[Key["Shift"] = 16] = "Shift";
    Key[Key["Ctrl"] = 17] = "Ctrl";
    Key[Key["Alt"] = 18] = "Alt";
    Key[Key["PauseBreak"] = 19] = "PauseBreak";
    Key[Key["CapsLock"] = 20] = "CapsLock";
    Key[Key["Escape"] = 27] = "Escape";
    Key[Key["Space"] = 32] = "Space";
    Key[Key["PageUp"] = 33] = "PageUp";
    Key[Key["PageDown"] = 34] = "PageDown";
    Key[Key["End"] = 35] = "End";
    Key[Key["Home"] = 36] = "Home";
    Key[Key["LeftArrow"] = 37] = "LeftArrow";
    Key[Key["UpArrow"] = 38] = "UpArrow";
    Key[Key["RightArrow"] = 39] = "RightArrow";
    Key[Key["DownArrow"] = 40] = "DownArrow";
    Key[Key["Insert"] = 45] = "Insert";
    Key[Key["Delete"] = 46] = "Delete";
    Key[Key["Zero"] = 48] = "Zero";
    Key[Key["ClosedParen"] = 48] = "ClosedParen";
    Key[Key["One"] = 49] = "One";
    Key[Key["ExclamationMark"] = 49] = "ExclamationMark";
    Key[Key["Two"] = 50] = "Two";
    Key[Key["AtSign"] = 50] = "AtSign";
    Key[Key["Three"] = 51] = "Three";
    Key[Key["PoundSign"] = 51] = "PoundSign";
    Key[Key["Hash"] = 51] = "Hash";
    Key[Key["Four"] = 52] = "Four";
    Key[Key["DollarSign"] = 52] = "DollarSign";
    Key[Key["Five"] = 53] = "Five";
    Key[Key["PercentSign"] = 53] = "PercentSign";
    Key[Key["Six"] = 54] = "Six";
    Key[Key["Caret"] = 54] = "Caret";
    Key[Key["Hat"] = 54] = "Hat";
    Key[Key["Seven"] = 55] = "Seven";
    Key[Key["Ampersand"] = 55] = "Ampersand";
    Key[Key["Eight"] = 56] = "Eight";
    Key[Key["Star"] = 56] = "Star";
    Key[Key["Asterik"] = 56] = "Asterik";
    Key[Key["Nine"] = 57] = "Nine";
    Key[Key["OpenParen"] = 57] = "OpenParen";
    Key[Key["A"] = 65] = "A";
    Key[Key["B"] = 66] = "B";
    Key[Key["C"] = 67] = "C";
    Key[Key["D"] = 68] = "D";
    Key[Key["E"] = 69] = "E";
    Key[Key["F"] = 70] = "F";
    Key[Key["G"] = 71] = "G";
    Key[Key["H"] = 72] = "H";
    Key[Key["I"] = 73] = "I";
    Key[Key["J"] = 74] = "J";
    Key[Key["K"] = 75] = "K";
    Key[Key["L"] = 76] = "L";
    Key[Key["M"] = 77] = "M";
    Key[Key["N"] = 78] = "N";
    Key[Key["O"] = 79] = "O";
    Key[Key["P"] = 80] = "P";
    Key[Key["Q"] = 81] = "Q";
    Key[Key["R"] = 82] = "R";
    Key[Key["S"] = 83] = "S";
    Key[Key["T"] = 84] = "T";
    Key[Key["U"] = 85] = "U";
    Key[Key["V"] = 86] = "V";
    Key[Key["W"] = 87] = "W";
    Key[Key["X"] = 88] = "X";
    Key[Key["Y"] = 89] = "Y";
    Key[Key["Z"] = 90] = "Z";
    Key[Key["LeftWindowKey"] = 91] = "LeftWindowKey";
    Key[Key["RightWindowKey"] = 92] = "RightWindowKey";
    Key[Key["SelectKey"] = 93] = "SelectKey";
    Key[Key["Numpad0"] = 96] = "Numpad0";
    Key[Key["Numpad1"] = 97] = "Numpad1";
    Key[Key["Numpad2"] = 98] = "Numpad2";
    Key[Key["Numpad3"] = 99] = "Numpad3";
    Key[Key["Numpad4"] = 100] = "Numpad4";
    Key[Key["Numpad5"] = 101] = "Numpad5";
    Key[Key["Numpad6"] = 102] = "Numpad6";
    Key[Key["Numpad7"] = 103] = "Numpad7";
    Key[Key["Numpad8"] = 104] = "Numpad8";
    Key[Key["Numpad9"] = 105] = "Numpad9";
    Key[Key["Multiply"] = 106] = "Multiply";
    Key[Key["Add"] = 107] = "Add";
    Key[Key["Subtract"] = 109] = "Subtract";
    Key[Key["DecimalPoint"] = 110] = "DecimalPoint";
    Key[Key["Divide"] = 111] = "Divide";
    Key[Key["F1"] = 112] = "F1";
    Key[Key["F2"] = 113] = "F2";
    Key[Key["F3"] = 114] = "F3";
    Key[Key["F4"] = 115] = "F4";
    Key[Key["F5"] = 116] = "F5";
    Key[Key["F6"] = 117] = "F6";
    Key[Key["F7"] = 118] = "F7";
    Key[Key["F8"] = 119] = "F8";
    Key[Key["F9"] = 120] = "F9";
    Key[Key["F10"] = 121] = "F10";
    Key[Key["F11"] = 122] = "F11";
    Key[Key["F12"] = 123] = "F12";
    Key[Key["NumLock"] = 144] = "NumLock";
    Key[Key["ScrollLock"] = 145] = "ScrollLock";
    Key[Key["SemiColon"] = 186] = "SemiColon";
    Key[Key["Equals"] = 187] = "Equals";
    Key[Key["Comma"] = 188] = "Comma";
    Key[Key["Dash"] = 189] = "Dash";
    Key[Key["Period"] = 190] = "Period";
    Key[Key["UnderScore"] = 189] = "UnderScore";
    Key[Key["PlusSign"] = 187] = "PlusSign";
    Key[Key["ForwardSlash"] = 191] = "ForwardSlash";
    Key[Key["Tilde"] = 192] = "Tilde";
    Key[Key["GraveAccent"] = 192] = "GraveAccent";
    Key[Key["OpenBracket"] = 219] = "OpenBracket";
    Key[Key["ClosedBracket"] = 221] = "ClosedBracket";
    Key[Key["Quote"] = 222] = "Quote";
  })(Key = exports.Key || (exports.Key = {}));
});
(0,_commonjsHelpers_97e6d7b1_js__WEBPACK_IMPORTED_MODULE_3__.u)(Key_enum);
var Key_enum_1 = Key_enum.Key;
const Login = class {
  constructor(hostRef) {
    var _this = this;

    (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.loginParams = {};
    /**
     * state variable that holds the user name
     */

    this.username = null;
    /**
     * state variable that holds the password
     */

    this.password = null;
    /**
     * If submit is possible
     */

    this.submitDisabled = true;
    /**
     * If login error appeared
     */

    this.loginError = false;
    /**
     * If server error appeared
     */

    this.serverError = false;
    /**
     * The design version of the framework
     */

    this.designVersion = null;
    /**
     * Specify the login error label
     */

    this.labelLoginError = `The user or password you entered are incorrect. Please try again.`;
    /**
     * Specify the server error label
     */

    this.labelServerError = `The service is not available at the moment. Please try again later.`;
    /**
     * Specify the username input label
     */

    this.labelUsername = `Username`;
    /**
     * Specify the type of data to accept on username input
     */

    this.inputUsernameType = 'text';
    /**
     * Specify the username input placeholder label
     */

    this.labelUsernamePlaceholder = `Enter your Username`;
    /**
     * Specify the password input label
     */

    this.labelPassword = `Password`;
    /**
     * Specify the password input label
     */

    this.labelPasswordPlaceholder = `Enter your Password`;
    /**
     * Specify the login CTA label
     */

    this.labelLoginCTA = `Log In`;
    /**
     * Specify the oauth login endpoint
     */

    this.oauthEndpoint = 'https://dev2.cemexgo.com/api/v2/secm/oam/oauth2/token';
    /**
     * Specify if the component shows in RTL language
     */

    this.rtl = false;
    /**
     * Specify if the component call to action button width
     */

    this.logInButtonWidth = `auto`;
    /**
     * Specify if input label should render for mobile
     */

    this.mobile = false;
    this.validateData = /*#__PURE__*/(0,D_Documentos_Documentos_DocumentosPersonales_Cemex_appcemex_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.submitDisabled = _this.username && _this.password ? false : true;
      return _this.submitDisabled;
    });

    this.trackKeystrokes = /*#__PURE__*/function () {
      var _ref2 = (0,D_Documentos_Documentos_DocumentosPersonales_Cemex_appcemex_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
        // let's listen to the key events so that we can track the enter for submission
        if (e.target === _this.host || _this.host.contains(e.target)) {
          // let's validate that there's some input
          yield _this.validateData();

          if (e.keyCode === Key_enum_1.Enter && !_this.submitDisabled) {
            // we are submitting
            // and we login
            _this.logIn();
          }
        }
      });

      return function (_x) {
        return _ref2.apply(this, arguments);
      };
    }();

    this.logIn = /*#__PURE__*/(0,D_Documentos_Documentos_DocumentosPersonales_Cemex_appcemex_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const loginObject = Object.assign(Object.assign({}, _this.loginParams.body), {
        username: _this.username,
        password: _this.password
      });
      const searchParams = Object.keys(loginObject).map(key => {
        return encodeURIComponent(key) + '=' + encodeURIComponent(loginObject[key]);
      }).join('&');

      try {
        const creds = yield fetch(_this.oauthEndpoint, {
          method: 'POST',
          mode: 'cors',
          cache: 'no-cache',
          headers: _this.loginParams.header,
          body: searchParams
        });

        if (creds.status) {
          if (creds.status === 200) {
            _this.loginError = false;
            _this.serverError = false;
          }

          if (Math.floor(creds.status / 100) === 4) {
            _this.loginError = true;
            _this.serverError = false;
          }

          if (Math.floor(creds.status / 100) === 5) {
            _this.serverError = true;
          }
        }

        _this.loginEvent.emit(creds);
      } catch (err) {
        _this.loginEvent.emit(err);
      }
    });

    this.usernameChange = e => {
      if (e.detail) {
        this.username = e.target.value;
      }
    };

    this.passwordChange = e => {
      this.password = e.target.value.trim();
    };

    this.componentDidLoad = /*#__PURE__*/(0,D_Documentos_Documentos_DocumentosPersonales_Cemex_appcemex_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // get the params from the params tags
      const paramTags = _this.host.querySelectorAll('cwc-login-param');

      paramTags.forEach(paramTag => {
        const paramType = paramTag.getAttribute('type');
        const paramKey = paramTag.getAttribute('name');
        const paramValue = paramTag.getAttribute('value');

        if (!_this.loginParams[paramType]) {
          _this.loginParams[paramType] = {};
        }

        _this.loginParams[paramType][paramKey] = paramValue;
      });
    });

    this.addKeystrokeTracking = () => {
      window.addEventListener('keyup', this.trackKeystrokes);
    };

    this.removeKeystrokeTracking = () => {
      window.removeEventListener('keyup', this.trackKeystrokes);
    };

    this.loginEvent = (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "cwcLogin", 7);
  }

  validateUsername(newValue, oldValue) {
    if (newValue !== oldValue) {
      this.validateData();
    }
  }

  validatePassword(newValue, oldValue) {
    if (newValue !== oldValue) {
      this.validateData();
    }
  }

  componentWillLoad() {
    (0,_commonComponentFeatures_b771e888_js__WEBPACK_IMPORTED_MODULE_2__.i)(this);
  }

  disconnectedCallback() {
    window.removeEventListener('keyup', this.trackKeystrokes);
    (0,_commonComponentFeatures_b771e888_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }

  render() {
    return (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)(_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: this.designVersion
    }, this.loginError ? (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "cwc-login__error"
    }, this.labelLoginError) : null, this.serverError ? (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "cwc-login__error"
    }, this.labelServerError) : null, (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", null, (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("cwc-ld-input", {
      name: "username",
      class: "cwc-login__input",
      label: this.labelUsername,
      placeholder: this.labelUsernamePlaceholder,
      type: this.inputUsernameType,
      value: this.username,
      onCwcFocus: this.addKeystrokeTracking,
      onCwcBlur: this.removeKeystrokeTracking,
      onCwcChange: this.usernameChange,
      onCwcInput: this.usernameChange,
      mobile: this.mobile,
      designVersion: this.designVersion
    })), (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", null, (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("cwc-ld-input", {
      name: "password",
      class: "cwc-login__input",
      label: this.labelPassword,
      placeholder: this.labelPasswordPlaceholder,
      type: "password",
      allowPasswordShow: true,
      value: this.password,
      clearOnEdit: false,
      onCwcFocus: this.addKeystrokeTracking,
      onCwcBlur: this.removeKeystrokeTracking,
      onCwcChange: this.passwordChange,
      onCwcInput: this.passwordChange,
      mobile: this.mobile,
      designVersion: this.designVersion
    })), (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
      name: "ctas"
    }), (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "cwc-login__button-wrap"
    }, (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.h)("cwc-button", {
      style: {
        width: this.logInButtonWidth
      },
      variant: "primary-block",
      onCwcClick: this.logIn,
      disabled: this.submitDisabled,
      designVersion: this.designVersion
    }, this.labelLoginCTA)));
  }

  get host() {
    return (0,_core_cf426fab_js__WEBPACK_IMPORTED_MODULE_1__.g)(this);
  }

  static get watchers() {
    return {
      "username": ["validateUsername"],
      "password": ["validatePassword"]
    };
  }

  static get style() {
    return "*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}cwc-login{display:block;line-height:16px!important}.cwc-login__input{width:100%}.cwc-login__error{color:var(--cwc-login-error-color,var(--cwc-color-status-error,#ee3d42));font-size:.75rem;margin-bottom:.75rem}[dir=ltr] .cwc-login__button-wrap{text-align:right}[dir=rtl] .cwc-login__button-wrap{text-align:left}.cwc-login__button-wrap{margin-top:1rem;text-align:end}";
  }

};


/***/ })

}]);
//# sourceMappingURL=node_modules_cmx-web-components_core_dist_esm_cwc-login_entry_js.js.map