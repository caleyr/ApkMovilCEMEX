{"version":3,"file":"src_app_pages_travels_detail-search_detail-search_module_ts.js","mappings":"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","sources":["./src/app/interfaces/travels/travel-search.ts","./src/app/pages/travels/detail-search/detail-search-routing.module.ts","./src/app/pages/travels/detail-search/detail-search.module.ts","./src/app/pages/travels/detail-search/detail-search.page.ts"],"sourcesContent":["export class TravelSearch{\r\n    id : string;\r\n    source : string;\r\n    destiny : string;\r\n    dateAndHourTravel : string;\r\n    codeTravel : string;\r\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailSearchPage } from './detail-search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailSearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailSearchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailSearchPageRoutingModule } from './detail-search-routing.module';\n\nimport { DetailSearchPage } from './detail-search.page';\nimport { ComponentsModule } from '../../../components/components.module';\nimport { CmxWebComponentsModule } from '@cmx-web-components/angular';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DetailSearchPageRoutingModule,\n    ComponentsModule,\n    CmxWebComponentsModule.forRoot(),\n    ReactiveFormsModule\n  ],\n  declarations: [DetailSearchPage]\n})\nexport class DetailSearchPageModule {}\n","import { Location } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { TravelService } from '../../../services/travels/travel.service';\nimport { TravelSearch } from '../../../interfaces/travels/travel-search';\nimport { LoginService } from '../../../services/auth/login.service';\nimport { DriversService } from '../../../services/drivers.service';\nimport { DriverList } from '../../drivers/models/drivers-list';\nimport { NavController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-detail-search',\n  templateUrl: './detail-search.page.html',\n  styleUrls: ['./detail-search.page.scss'],\n})\nexport class DetailSearchPage implements OnInit {\n\n  codeTravel : string;\n  \n  alertShow = false;\n  addDriver = false;\n\n  rol = null;\n  travel : TravelSearch = new TravelSearch();\n  driverList :  DriverList[] = [];\n  driverAssign : string = null;\n  driverValidate : boolean = true;\n\n  constructor(    \n    private loginService : LoginService,\n    private location : Location,\n    private travelService : TravelService,\n    private driversService : DriversService,\n    private navCtrl : NavController\n    ) { }\n\n  ngOnInit() {\n    this.rol = this.loginService.profileUser.Roles;\n    console.log(this.rol);    \n    this.codeTravel = this.travelService.code;\n    this.getData(this.codeTravel);\n  }\n\n  getData(code){\n    this.travelService.getTravelsForCode(code).subscribe(data=>{\n      this.travel = data.data;\n    });\n    this.driversService.getDriverList(this.loginService.profileUser.CompanyId).subscribe(result =>{\n      this.driverList = result.data;\n    })\n  }\n  \n  onBack(){\n    this.location.back();\n  }\n\n  closeAlertConfirm(){\n    this.driverAssign = null;\n    this.driverValidate = true;\n    this.addDriver = false;\n  }\n\n  closeModalOk(){\n    this.alertShow = false;\n    this.navCtrl.navigateBack('/app/travels', { animated: false });\n  }\n\n  openModal(){\n    this.addDriver = true;\n  }\n\n  cwcChangeDrivers(event){\n    this.driverAssign = event.detail.value;    \n    this.driverValidate = false;\n  }\n\n  async onClickCreateRequest(){\n    const dataFormC = new FormData();\n    dataFormC.append('StatusRequestTravels', '1');\n    dataFormC.append('DriverId', this.loginService.profileUser.id);\n    dataFormC.append('TravelId', this.travel.id);\n    await this.createTravel(dataFormC);\n\n    const dataFormU = new FormData();    \n    dataFormU.append('Id', this.travel.id);\n    dataFormU.append('UserId', this.loginService.profileUser.id);\n    await this.updateTravel(this.travel.id ,dataFormU);\n    this.addDriver = false;\n    this.alertShow = true;\n  }\n\n  createTravel(dataForm){\n    return new Promise((resolve)=>{\n      this.travelService.createTravel(dataForm).subscribe(data=>{\n        resolve(data);\n      });\n    });\n  }\n\n  updateTravel(id, dataForm){\n    return new Promise((resolve)=>{\n      this.travelService.updateTravel(id, dataForm).subscribe(data=>{\n        resolve(data);\n      });\n    });\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}