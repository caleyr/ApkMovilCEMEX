{"version":3,"file":"src_app_pages_drivers_new-driver_new-driver_module_ts.js","mappings":"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OAAO,CAAC,CAAC,YAAY,EAAE,EAAE;wBAClC,SAAS,CAAC,IAAI,CAAC,GAAG,KAAK,KAAK,YAAY,EAAE,CAAC,CAAC;oBAC9C,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;aACJ;SACF;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;CACF;;AA5BY,oBAAoB;IAHhC,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,oBAAoB,CA4BhC;AA5BgC;;;;;;;;;;;;;;;ACL1B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACT2C;AACA;AACpC,2CAA2C,mDAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,mDAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrD+C;AACxC,qBAAqB,uDAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACRkC;AAC3B,0BAA0B,2CAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9EyC;AAClC,6BAA6B,iDAAS;AAC7C,uCAAuC,qDAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5C4C;AACM;AAC3C,2BAA2B,2DAAc,CAAC,qDAAW;AACrD","sources":["./src/app/pages/drivers/new-driver/new-driver-routing.module.ts","./src/app/pages/drivers/new-driver/new-driver.module.ts","./src/app/pages/drivers/new-driver/new-driver.page.ts","./src/app/services/error-messages.service.ts","./node_modules/rxjs/_esm2015/internal/Scheduler.js","./node_modules/rxjs/_esm2015/internal/operators/debounceTime.js","./node_modules/rxjs/_esm2015/internal/scheduler/Action.js","./node_modules/rxjs/_esm2015/internal/scheduler/AsyncAction.js","./node_modules/rxjs/_esm2015/internal/scheduler/AsyncScheduler.js","./node_modules/rxjs/_esm2015/internal/scheduler/async.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewDriverPage } from './new-driver.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewDriverPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewDriverPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewDriverPageRoutingModule } from './new-driver-routing.module';\n\nimport { NewDriverPage } from './new-driver.page';\nimport { CmxWebComponentsModule } from '@cmx-web-components/angular';\nimport { ComponentsModule } from '../../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    NewDriverPageRoutingModule,\n    ComponentsModule,\n    ReactiveFormsModule,\n    CmxWebComponentsModule.forRoot(),\n  ],\n  declarations: [NewDriverPage]\n})\nexport class NewDriverPageModule {}\n","import { Component, OnInit, EventEmitter } from '@angular/core';\nimport { debounceTime } from 'rxjs/operators';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { ErrorMessagesService } from '../../../services/error-messages.service';\nimport { CompaniesService } from '../../../services/companies/companies.service';\nimport { LoginService } from '../../../services/auth/login.service';\nimport { Location } from '@angular/common';\nimport { DriversService } from '../../../services/drivers.service';\nimport { Companies } from '../../../interfaces/companies/companies';\n\n@Component({\n  selector: 'app-new-driver',\n  templateUrl: './new-driver.page.html',\n  styleUrls: ['./new-driver.page.scss'],\n})\nexport class NewDriverPage implements OnInit {\n\n  propagar = new EventEmitter<boolean>();\n\n  form: FormGroup;\n  data : FormData;\n  company : Companies = new Companies();\n\n  alertSucces = true;\n  alertConfirm = false;\n  addIdentityCard = false;\n  addDocumentCompany = false;\n  toastMessage = '';\n\n  errors: string[] = [];\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private loginService : LoginService,\n    private companiesService : CompaniesService,\n    private errorMessages: ErrorMessagesService,\n    private driversService : DriversService,\n    private location : Location\n  ) {    \n    this.formBuilderInput(loginService.profileUser.CompanyId);\n    this.companiesService.getCompany(loginService.profileUser.CompanyId).subscribe(async data =>{\n      this.company = data.data;\n    });\n  }\n\n  ngOnInit() {\n    this.alertSucces = false;  \n  }\n\n  async createVehicle(){\n    if(this.form.invalid){\n      return;\n    }\n    this.data = new FormData();\n    this.addFormData(this.form.value);\n    this.propagar.emit(true);\n    await this.driversService.createDriver(this.data).subscribe(async resp =>{\n       this.propagar.emit(false);\n       this.alertSucces = true;\n       this.errors = [];\n    }, (error) =>{\n       this.propagar.emit(false);\n       this.errors = this.errorMessages.parsearErroresAPI(error);\n    });\n  }\n\n  async addFormData(objeto){\n    for ( var key in objeto ) {\n      if(key !== 'term'){    \n        this.data.append(key, objeto[key]);\n      }      \n    }\n  }\n\n  removeDocumentCompany(){\n    this.form.get('documentCompany').setValue('');\n    //this.conveyorService.removeModalPhotoDocumentCompany.emit();\n    this.addDocumentCompany = false;\n    this.toastMessage = 'Se eliminó el documento de la empresa';\n    const element = document.getElementById('toast-message-driver');\n      element.classList.remove('hide');\n  }\n\n  removeIdentityCard(){\n    this.form.get('documentIdentityCardFrontal').setValue('');\n    this.form.get('documentIdentityCardBack').setValue('');\n    //this.conveyorService.removeModalIdentityCardDriver.emit();\n    this.addIdentityCard = false;\n    this.toastMessage = 'Se eliminó la cédula de ciudadanía';\n    const element = document.getElementById('toast-message-driver');\n      element.classList.remove('hide');\n  }\n\n  openAlertConfirm(){\n    if(this.form.invalid){\n      return;\n    }\n    this.alertConfirm = true;\n  }\n\n  closeAlertConfirm(){\n    this.alertConfirm = false;\n  }\n\n  onBack(){\n    this.location.back();\n  }\n\n  /*=============================================\n   FORMULARIO REACTIVOS\n  =============================================*/\n  formBuilderInput(id : string){\n    this.form = this.formBuilder.group({\n      FirstName: ['', [ Validators.required ]],\n      LastName: ['', [ Validators.required ]],\n      Password: ['Cemex_2022', [ Validators.required ]],    \n      Email: ['', [ Validators.required ]],    \n      CompanyId: [id, [ Validators.required ]],\n      Roles: ['Conductor'],\n      Document: ['', [ Validators.required ]],\n      SapCode: ['', [ Validators.required ]],\n      PhoneNumber: ['', [ Validators.required ]],\n      term: [false, [ Validators.requiredTrue ]]\n    });\n\n    this.form.valueChanges\n    .pipe(\n      debounceTime(350),\n    )\n    .subscribe(data => {\n      console.log(data);      \n      //this.validateInput();\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ErrorMessagesService {\r\n\r\n  constructor() { }\r\n\r\n  public parsearErroresAPI(response: any): string[] {\r\n    const resultado: string[] = [];\r\n    if (response.status === 500){\r\n      resultado.push('Ha ocurrido un error en el servidor. Favor intentar más tarde');\r\n      return resultado;\r\n    }\r\n\r\n    if (response.error) {\r\n      if (typeof response.error === 'string') {\r\n        resultado.push(response.error);\r\n      } else {\r\n        const mapaErrores = response.error.errors;\r\n        const entradas = Object.entries(mapaErrores);\r\n        entradas.forEach((arreglo: any[]) => {\r\n          const campo = arreglo[0];\r\n          arreglo[1].forEach((mensajeError) => {\r\n            resultado.push(`${campo}: ${mensajeError}`);\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    return resultado;\r\n  }\r\n}\r\n","export class Scheduler {\n    constructor(SchedulerAction, now = Scheduler.now) {\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    schedule(work, delay = 0, state) {\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    }\n}\nScheduler.now = () => Date.now();\n","import { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nexport function debounceTime(dueTime, scheduler = async) {\n    return (source) => source.lift(new DebounceTimeOperator(dueTime, scheduler));\n}\nclass DebounceTimeOperator {\n    constructor(dueTime, scheduler) {\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n    }\n}\nclass DebounceTimeSubscriber extends Subscriber {\n    constructor(destination, dueTime, scheduler) {\n        super(destination);\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n        this.debouncedSubscription = null;\n        this.lastValue = null;\n        this.hasValue = false;\n    }\n    _next(value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n    }\n    _complete() {\n        this.debouncedNext();\n        this.destination.complete();\n    }\n    debouncedNext() {\n        this.clearDebounce();\n        if (this.hasValue) {\n            const { lastValue } = this;\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    }\n    clearDebounce() {\n        const debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    }\n}\nfunction dispatchNext(subscriber) {\n    subscriber.debouncedNext();\n}\n","import { Subscription } from '../Subscription';\nexport class Action extends Subscription {\n    constructor(scheduler, work) {\n        super();\n    }\n    schedule(state, delay = 0) {\n        return this;\n    }\n}\n","import { Action } from './Action';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, delay) {\n        let errored = false;\n        let errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    _unsubscribe() {\n        const id = this.id;\n        const scheduler = this.scheduler;\n        const actions = scheduler.actions;\n        const index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    }\n}\n","import { Scheduler } from '../Scheduler';\nexport class AsyncScheduler extends Scheduler {\n    constructor(SchedulerAction, now = Scheduler.now) {\n        super(SchedulerAction, () => {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        });\n        this.actions = [];\n        this.active = false;\n        this.scheduled = undefined;\n    }\n    schedule(work, delay = 0, state) {\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return super.schedule(work, delay, state);\n        }\n    }\n    flush(action) {\n        const { actions } = this;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        let error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\nexport const async = asyncScheduler;\n"],"names":[],"sourceRoot":"webpack:///"}