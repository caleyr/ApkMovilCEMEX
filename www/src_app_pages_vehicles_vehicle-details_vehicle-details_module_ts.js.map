{"version":3,"file":"src_app_pages_vehicles_vehicle-details_vehicle-details_module_ts.js","mappings":"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","sources":["./src/app/pages/vehicles/vehicle-details/vehicle-details-routing.module.ts","./src/app/pages/vehicles/vehicle-details/vehicle-details.module.ts","./src/app/pages/vehicles/vehicle-details/vehicle-details.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { VehicleDetailsPage } from './vehicle-details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VehicleDetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class VehicleDetailsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { VehicleDetailsPageRoutingModule } from './vehicle-details-routing.module';\r\n\r\nimport { VehicleDetailsPage } from './vehicle-details.page';\r\nimport { CmxWebComponentsModule } from '@cmx-web-components/angular';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    VehicleDetailsPageRoutingModule,\r\n    CmxWebComponentsModule.forRoot(),\r\n  ],\r\n  declarations: [VehicleDetailsPage]\r\n})\r\nexport class VehicleDetailsPageModule {}\r\n","import { Location } from '@angular/common';\r\nimport { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Vehicle } from '../models/vehicle';\r\nimport { identity, Subscription } from 'rxjs';\r\nimport { VehiclesService } from '../../../services/vehicles.service';\r\nimport { NavController } from '@ionic/angular';\r\nimport { LoginService } from '../../../services/auth/login.service';\r\nimport { DriversService } from '../../../services/drivers.service';\r\nimport { DriverList } from '../../drivers/models/drivers-list';\r\n\r\n@Component({\r\n  selector: 'app-vehicle-details',\r\n  templateUrl: './vehicle-details.page.html',\r\n  styleUrls: ['./vehicle-details.page.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class VehicleDetailsPage implements OnInit {\r\n  \r\n  id : string;\r\n  rol : string = null;\r\n  company : string;\r\n  vehicle : Vehicle = new Vehicle();\r\n  driverList :  DriverList[] = [];\r\n  suscripcion : Subscription;\r\n\r\n  idTercero : string;\r\n  idAdmin = '0h174cfb–4418–1c3e-a2bf-89f716w72cu3';\r\n\r\n  addDriver = false;\r\n  alertShow = false;\r\n  driverAssign : string;\r\n\r\n  constructor(\r\n    private location : Location,\r\n    private vehiclesService : VehiclesService,\r\n    private loginService : LoginService,\r\n    private navCtrl : NavController,\r\n    private driversService : DriversService\r\n    ) { \r\n      this.rol = this.loginService.profileUser.Roles;\r\n      this.idTercero = this.loginService.profileUser.id;\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.suscripcion = this.vehiclesService.refresh$.subscribe(() =>{\r\n      this.getData();\r\n    });\r\n    this.getData();\r\n  }\r\n\r\n  onBack(){\r\n    this.location.back();\r\n  }\r\n\r\n  closeAlertConfirm(){\r\n    this.addDriver = false;\r\n  }\r\n\r\n  closeAlertSuccess(){\r\n    this.alertShow = false;\r\n  }\r\n\r\n  cwcChangeDrivers(event){\r\n    this.driverAssign = event.detail.value;\r\n  }\r\n\r\n  openModal(){\r\n    this.addDriver = true;\r\n  }\r\n\r\n  addDriverForVehicle(){\r\n    const data : FormData = new FormData();\r\n    data.append('LicenseVehiculo', this.vehicle.licenseVehiculo);\r\n    data.append('UserId', this.driverAssign);\r\n    this.vehiclesService.driverAssignmentVehicle(this.id, data).subscribe(data=>{\r\n      this.alertShow = true;\r\n    });\r\n  }\r\n\r\n  getData(){\r\n    if(this.vehiclesService.id !== null){\r\n      this.id = this.vehiclesService.id;\r\n      this.driversService.getDriverList(this.loginService.profileUser.CompanyId).subscribe(result =>{\r\n        this.driverList = result.data;\r\n      })\r\n      this.vehiclesService.getVehicleById(this.id).subscribe(data=>{\r\n        this.vehicle = data.data;\r\n      });\r\n    }    \r\n  }\r\n\r\n  updateVehicle(){\r\n    this.vehiclesService.vehicle = this.vehicle;\r\n    this.navCtrl.navigateRoot('/app/vehiculos/actualizar', { animated : false });\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}