{"version":3,"file":"src_app_pages_waiting-list_waiting-list_module_ts.js","mappings":"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","sources":["./src/app/pages/waiting-list/components/request-waiting-list/request-waiting-list.component.ts","./src/app/pages/waiting-list/waiting-list-routing.module.ts","./src/app/pages/waiting-list/waiting-list.module.ts","./src/app/pages/waiting-list/waiting-list.page.ts","./src/app/services/request.service.ts"],"sourcesContent":["import { LoginService } from 'src/app/services/auth/login.service';\r\nimport { RequestService } from './../../../../services/request.service';\r\nimport { Router } from '@angular/router';\r\nimport { Request } from './../../models/request';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-request-waiting-list',\r\n  templateUrl: './request-waiting-list.component.html',\r\n  styleUrls: ['./request-waiting-list.component.scss'],\r\n})\r\nexport class RequestWaitingListComponent implements OnInit {\r\n\r\n  @Input() requests: Request[];\r\n\r\n  constructor(private router: Router,\r\n    private requestService: RequestService,\r\n    private loginService: LoginService) { }\r\n\r\n  ngOnInit() { }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { WaitingListPage } from './waiting-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WaitingListPage\n  },\n  {\n    path: 'new-request',\n    loadChildren: () => import('./new-request/new-request.module').then( m => m.NewRequestPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WaitingListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WaitingListPageRoutingModule } from './waiting-list-routing.module';\n\nimport { WaitingListPage } from './waiting-list.page';\nimport { ComponentsModule } from '../../components/components.module';\nimport { CmxWebComponentsModule } from '@cmx-web-components/angular';\nimport { LayoutPageModule } from '../layout/layout.module';\nimport { RequestWaitingListComponent } from './components/request-waiting-list/request-waiting-list.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    WaitingListPageRoutingModule,\n    ComponentsModule,\n    CmxWebComponentsModule.forRoot(),\n    ReactiveFormsModule,\n    LayoutPageModule,\n  ],\n  declarations: [\n    WaitingListPage,    \n    RequestWaitingListComponent\n  ]\n})\nexport class WaitingListPageModule {}\n","import { Request } from './models/request';\r\nimport { LoginService } from 'src/app/services/auth/login.service';\r\nimport { RequestService } from './../../services/request.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-waiting-list',\r\n  templateUrl: './waiting-list.page.html',\r\n  styleUrls: ['./waiting-list.page.scss'],\r\n})\r\nexport class WaitingListPage implements OnInit {\r\n\r\n  requestsList: Request[] = [];\r\n\r\n  suscripcion : Subscription;\r\n\r\n  constructor(\r\n    private requestService: RequestService,\r\n    private loginService: LoginService) { }\r\n\r\n  ngOnInit() {\r\n    this.suscripcion = this.requestService.refresh$.subscribe(() =>{      \r\n      this.getData();\r\n    })\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    if(this.loginService.profileUser.Roles === 'Conductor'){\r\n      this.requestService.getRequestByIdUser(this.loginService.profileUser.Email).subscribe(data => {\r\n        this.requestsList = data.data;\r\n      })\r\n    }else{\r\n      this.requestService.getRequestByIdCompany(this.loginService.profileUser.CompanyId).subscribe(data => {\r\n        this.requestsList = data.data;\r\n      })\r\n    }    \r\n  }\r\n\r\n  doRefresh(event){\r\n    setTimeout(()=>{      \r\n      this.requestsList = [];\r\n      this.getData();\r\n      event.target.complete();\r\n    }, 2000);\r\n  }\r\n\r\n}\r\n","import { Request } from './../pages/waiting-list/models/request';\r\nimport { Subject } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { tap } from 'rxjs/operators';\r\nimport { HttpService } from './http/http.service';\r\nimport { environment } from 'src/environments/environment.prod';\r\n\r\nconst BASE_URL_API = environment.url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RequestService {\r\n\r\n  id : string = null;\r\n  request: Request;\r\n  private _refresh$ = new Subject<void>();\r\n\r\n  constructor(private http: HttpService) { }\r\n\r\n  get refresh$(){\r\n    return this._refresh$;\r\n  }\r\n\r\n  createRequest(data: any){\r\n    return this.http.doPostFormData(`${BASE_URL_API}/api/waitingList/CreateRequestTravel`, data, {}).pipe(\r\n      tap(() => {\r\n        this._refresh$.next();\r\n      })\r\n    )\r\n  }\r\n\r\n  updateRequest(id: string, data: any){\r\n    return this.http.doPut(`${BASE_URL_API}/api/waitingList/${id}`, data, {}).pipe(\r\n      tap(() => {\r\n        this._refresh$.next();\r\n      })\r\n    )\r\n  }\r\n\r\n  getRequestDetail(id: string){\r\n    return this.http.doGet(`${BASE_URL_API}/api/waitingList/RequestById/${id}`, {});\r\n  }\r\n\r\n  getRequestByIdUser(correo: string){\r\n    return this.http.doGet(`${BASE_URL_API}/api/waitingList/GetRequestByIdUser/${correo}`, {});\r\n  }\r\n\r\n  getRequestByIdCompany(idCompany: string){\r\n    return this.http.doGet(`${BASE_URL_API}/api/waitingList/GetListWaitingByIdCompany/${idCompany}`, {});\r\n  }\r\n\r\n  getRequests(){\r\n    return this.http.doGet(`${BASE_URL_API}/api/waitingList/`, {});\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}