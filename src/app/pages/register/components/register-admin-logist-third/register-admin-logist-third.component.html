<form (submit)="register()" [formGroup]="form">
  <cwc-picker (cwcChange)="cwcChange($event)" [loading]="loadingCompany" [disabled]="loadingCompany" class="w-full select-filter" label='Empresa'
    filter-no-resultsMessage="No se encontraron resultados" filter-placeholder="Filtrar Empresas"
    placeholder="Seleccionar" design-version="v2" filter>
    <ng-container *ngFor="let companies of listCompanies">
      <option [value]="companies.CodigoId">{{companies.CompanyName}}</option>
    </ng-container>
  </cwc-picker>
  <cwc-grid class="demo-grid" design-version="v2" columns="12" mobile-columns="12" style="margin-top: 1.5rem;">
    <cwc-cell colspan="12" mobile-colspan="12">
      <div class="section">
        <cwc-input class="input" label='Nombre (s)' [status]="msgField.getStatusField(form, 'FirstName')"
          [statusMessage]="msgField.getFirstNameFieldMsg(form, 'FirstName', 'nombre(s)')" maxlength="45"
          placeholder="Escribe tu Nombre" design-version="v2" formControlName="FirstName" required></cwc-input>
      </div>
      <div class="section">
        <cwc-input class="input" label='Apellido (s)' [status]="msgField.getStatusField(form, 'LastName')"
          [statusMessage]="msgField.getLastNameFieldMsg(form, 'LastName', 'apellido(s)')" maxlength="45"
          placeholder="Apellido paterno y materno" formControlName="LastName" design-version="v2" required></cwc-input>
      </div>
      <div class="section">
        <cwc-input class="input" label='Correo electrónico' [status]="msgField.getStatusField(form, 'Email')"
          [statusMessage]="msgField.getEmailFieldMsg(form, 'Email', 'correo electrónico')" formControlName="Email"
          placeholder="Agrega tu correo electrónico" design-version="v2" required></cwc-input>
      </div>
      <div class="section">
        <cwc-input class="input" label='Número de celular' type="number"
          [status]="msgField.getStatusField(form, 'PhoneNumber')"
          [statusMessage]="msgField.getPhoneNumberFieldMsg(form, 'PhoneNumber', 'número de celular')"
          placeholder="Agrega un número de telefono" formControlName="PhoneNumber" design-version="v2" required>
        </cwc-input>
      </div>
      <div class="section">
        <cwc-input class="input" label='Contraseña' [status]="msgField.getStatusField(form, 'Password')"
          [statusMessage]="msgField.getPasswordFieldMsg(form, 'Password', 'contraseña')" type="password"
          placeholder="Contraseña" formControlName="Password" design-version="v2" allow-password-show='true' required>
        </cwc-input>
      </div>
    </cwc-cell>
  </cwc-grid>
  <label for="">Licencia de conducción (opcional)</label>
  <div *ngIf="!fileRegister.fileDrivinglicense">
    <cwc-grid class="demo-grid content-archive" column-gap="1px">
      <input type="file" accept="image/*,.pdf" #getFileDrivinglicense style="display: none;"
        (change)="fileRegister.onFileDrivinglicense($event)" />
      <cwc-cell (click)="openModalDocument('Drivinglicense')" class="border" mobile-colspan="6">
        <div class="item-archives">
          <cwc-icon name="camera" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Tomar fotografía</div>
        </div>
      </cwc-cell>
      <cwc-cell mobile-colspan="6" alignItems="center">
        <div class="item-archives" (click)="getFileDrivinglicense.click()">
          <cwc-icon name="document" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Seleccionar archivo</div>
        </div>
      </cwc-cell>
    </cwc-grid>
  </div>
  <div *ngIf="fileRegister.fileDrivinglicense">
    <cwc-grid class="demo-grid content-archive flex">
      <cwc-cell mobile-colspan="11">
        <div class="item-archives">
          <cwc-icon name="attachment" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">{{fileRegister.fileDrivinglicense}}</div>
        </div>
      </cwc-cell>
      <cwc-cell mobile-colspan="1" class="flex">
        <cwc-icon style="display: flex; align-items: center; padding-top: 5px; padding-right: 1rem;"
          (click)="fileRegister.deleteFileDrivinglicense(inputFileDrive)" name="close" size="20px" color="bright-blue">
        </cwc-icon>
      </cwc-cell>
    </cwc-grid>
  </div>
  <!--=====================================
      CEDULA DE CIUDADANIA
    ======================================-->
  <label for="">Carné de seguridad industrial y vial (opcional)</label>
  <div *ngIf="!fileRegister.fileSecurityCard">
    <cwc-grid class="demo-grid content-archive" column-gap="1px">
      <input type="file" accept="image/*,.pdf" #getFileSecurityCard style="display: none;"
        (change)="fileRegister.onFileSecurityCard($event)" />
      <cwc-cell (click)="openModalDocument('SecurityCard')" class="border" colspan="6" mobile-colspan="6">
        <div class="item-archives">
          <cwc-icon name="camera" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Tomar fotografía</div>
        </div>
      </cwc-cell>
      <cwc-cell colspan="6" mobile-colspan="6">
        <div class="item-archives" (click)="getFileSecurityCard.click()">
          <cwc-icon name="document" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Seleccionar archivo</div>
        </div>
      </cwc-cell>
    </cwc-grid>
  </div>
  <div *ngIf="fileRegister.fileSecurityCard">
    <cwc-grid class="demo-grid content-archive flex">
      <cwc-cell mobile-colspan="11">
        <div class="item-archives">
          <cwc-icon name="attachment" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">{{fileRegister.fileSecurityCard}}</div>
        </div>
      </cwc-cell>
      <cwc-cell mobile-colspan="1" class="flex">
        <cwc-icon style="display: flex; align-items: center; padding-top: 5px; padding-right: 1rem;"
          (click)="fileRegister.deleteFileSecurityCard(inputFileSecurity)" name="close" size="20px" color="bright-blue">
        </cwc-icon>
      </cwc-cell>
    </cwc-grid>
  </div>

  <label for="">Cédula de ciudadanía (opcional)</label>
  <div *ngIf="!fileRegister.fileDocument">
    <cwc-grid class="demo-grid content-archive" column-gap="1px">
      <input type="file" accept="image/*,.pdf" #getFileDocument style="display: none;"
        (change)="fileRegister.onFileDocument($event)" />
      <cwc-cell (click)="openModalDocument('DocumentIdentityCard')" class="border" colspan="6" mobile-colspan="6">
        <div class="item-archives">
          <cwc-icon name="camera" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Tomar fotografía</div>
        </div>
      </cwc-cell>
      <cwc-cell colspan="6" mobile-colspan="6">
        <div class="item-archives" (click)="getFileDocument.click()">
          <cwc-icon name="document" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">Seleccionar archivo</div>
        </div>
      </cwc-cell>
    </cwc-grid>
  </div>
  <div *ngIf="fileRegister.fileDocument">
    <cwc-grid class="demo-grid content-archive flex">
      <cwc-cell mobile-colspan="11">
        <div class="item-archives">
          <cwc-icon name="attachment" size="28px" color="bright-blue"></cwc-icon>
          <div class="text-archive">{{fileRegister.fileDocument}}</div>
        </div>
      </cwc-cell>
      <cwc-cell mobile-colspan="1" class="flex">
        <cwc-icon style="display: flex; align-items: center; padding-top: 5px; padding-right: 1rem;"
          (click)="fileRegister.deleteFileDocument(inputFileDoc)" name="close" size="20px" color="bright-blue">
        </cwc-icon>
      </cwc-cell>
    </cwc-grid>
  </div>

  <app-error-messages [errors]="errors"></app-error-messages>
  <!--=====================================
    BOTON PARA GUARDAR EL REGISTRO
  ======================================-->
  <div class="content-button">
    <cwc-button design-version="v1" [disabled]="form.invalid" (click)="openAlertConfirm()" variant="regular-block">
      <div class="button-css">COMPLETAR REGISTRO</div>
    </cwc-button>
  </div>
</form>

<cwc-modal id='modal-document' class="modal-cemex" closeOnBdClick="false" (cwcClose)="cloceModalDocument()">
  <header slot='header'>
    <h2 style='margin:0;'>Agregar {{nameText}} (Opcional)</h2>
  </header>
  <cwc-grid class="demo-grid" design-version="v2" columns="12" mobile-columns="12" style="margin-top: 2rem;"
    style="margin-bottom: 2rem">
    <cwc-cell colspan="6" mobile-colspan="12" style="cursor: pointer; margin-top: 1rem;">
      <label for="">1. Parte frontal del documento.</label>
      <div class="contend-upload-camera" (click)="fileRegister.openCameraOne()">

        <ion-img class="img-photo-register" *ngIf="fileRegister.photoFrontal" [src]="fileRegister.photoFrontal" style="object-fit: cover;
          max-height: 175px !important;"></ion-img>

        <cwc-icon *ngIf="!fileRegister.photoFrontal" name="camera" color="bright-blue" size="30px"
          style="margin-right: 1rem;"></cwc-icon>
        <p *ngIf="!fileRegister.photoFrontal">Abrir cámara del dispositivo</p>

      </div>
      <cwc-button (click)="fileRegister.removePhotoFrontal()" *ngIf="fileRegister.photoFrontal" variant="link"
        class="m-h-reg remove-photo-archive">Quitar Foto</cwc-button>
    </cwc-cell>
    <cwc-cell colspan="6" mobile-colspan="12" style="cursor: pointer; margin-top: 1rem;">
      <label for="">2. Parte trasera del documento.</label>
      <div class="contend-upload-camera" (click)="fileRegister.openCameraTwo()">

        <ion-img class="img-photo-register" *ngIf="fileRegister.photoBack" [src]="fileRegister.photoBack" style="object-fit: cover;
        max-height: 175px !important;"></ion-img>

        <cwc-icon *ngIf="!fileRegister.photoBack" name="camera" color="bright-blue" size="30px"
          style="margin-right: 1rem;"></cwc-icon>
        <p *ngIf="!fileRegister.photoBack">Abrir cámara del dispositivo</p>

      </div>
      <cwc-button (click)="fileRegister.removePhotoBack()" *ngIf="fileRegister.photoBack" variant="link"
        class="m-h-reg remove-photo-archive">Quitar Foto</cwc-button>
    </cwc-cell>
  </cwc-grid>
  <footer slot='footer'>
    <div style='text-align: center'>
      <cwc-button variant='support' design-version="v2" (click)="cloceModalDocument()" style="margin-right: 1rem;">
        Cancelar</cwc-button>
      <cwc-button design-version="v2" *ngIf="fileRegister.photoBack && fileRegister.photoFrontal" variant='primary'
        (click)="saveDocument()">Aceptar</cwc-button>
    </div>
  </footer>
</cwc-modal>

<!--=====================================
		MODAL ALERTA CONFIRMAR DATOS GUARDAR
======================================-->
<cwc-modal id='alert-confirm' class="alert-confirm" [open]="alertConfirm" (cwcClose)="closeAlertConfirm()">
  <header slot='header'>
    <h2 style='margin:0;'>Atención</h2>
  </header>
  <p>¿Esta seguro que los datos registrados estan correctos?</p>
  <footer slot='footer'>
    <div style='text-align: end'>
      <cwc-button variant='support' (click)="closeAlertConfirm()" style="margin-right: 1rem;">Cancelar</cwc-button>
      <cwc-button variant='primary' (click)="register()">Aceptar</cwc-button>
    </div>
  </footer>
</cwc-modal>
<!--=====================================
		MODAL CONFIRMACIÓN RESPUESTA DE EXITO
======================================-->
<app-alert-success [alertShow]="alertSucces" title="Existoso" urlButton="app/home"
  message="El registro se realizó correctamente, vamos a validar sus datos y pronto daremos respuesta.">
</app-alert-success>
<!--=====================================
	TOAST ALERT MENSAJE
======================================-->
<cwc-snackbar id='toast-message-driver' [message]="toastMessage" cta-message="dismiss" auto-hide-duration='5000'>
</cwc-snackbar>